# Enterprise Node.js Backend Boilerplate

A production-ready, highly scalable backend architecture built with **Node.js**, **TypeScript**, **Express**, **PostgreSQL**, and **Drizzle ORM**. This project prioritizes security, modularity, type safety, and developer experience.

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Node](https://img.shields.io/badge/node-v20%2B-green.svg)
![TypeScript](https://img.shields.io/badge/typescript-v5-blue.svg)

---

## ğŸš€ Key Features

* **Strict Type Safety:** Full TypeScript implementation with strict mode enabled.
* **Modular Architecture:** Feature-sliced folder structure (Route -> Controller -> Service -> DB).
* **Database:** PostgreSQL 16 with Drizzle ORM for type-safe SQL queries and migrations.
* **Authentication:** Secure JWT implementation with Middleware protection.
* **Containerization:** Multi-stage Docker build for production and Docker Compose for local development.
* **Validation:** Request validation using Zod (optional integration ready).
* **Testing:** Integrated Unit and Integration testing setup with Jest and Supertest.
* **Security:** Helmet (Headers), CORS, Rate Limiting, and clean Error Handling.
* **Logging:** Structured logging with Winston and HTTP logging with Morgan.

---

## ğŸ› ï¸ Tech Stack

* **Runtime:** Node.js (LTS)
* **Framework:** Express.js
* **Language:** TypeScript
* **Database:** PostgreSQL
* **ORM:** Drizzle ORM
* **Tools:** Docker, Docker Compose, Jest, ESLint, Prettier

---

## ğŸ“‚ Project Structure

```text
root
â”œâ”€â”€ dist/                   # Compiled JavaScript (Production)
â”œâ”€â”€ drizzle/                # SQL Migration files (Generated by Drizzle Kit)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/             # Configs (Logger, DB options)
â”‚   â”œâ”€â”€ db/                 # Database connection & Schema definitions
â”‚   â”œâ”€â”€ middlewares/        # Express middlewares (Auth, Error, RateLimit)
â”‚   â”œâ”€â”€ modules/            # Feature Modules (Domain Driven Design)
â”‚   â”‚   â””â”€â”€ auth/           # Example: Auth Feature (Controller, Service, Routes)
â”‚   â”œâ”€â”€ utils/              # Utilities (ApiError, ApiResponse, AsyncHandler)
â”‚   â”œâ”€â”€ app.ts              # Express App setup
â”‚   â””â”€â”€ index.ts            # Entry Point
â”œâ”€â”€ .env.example            # Environment variables template
â”œâ”€â”€ docker-compose.yml      # Local infrastructure orchestration
â”œâ”€â”€ Dockerfile              # Production image definition
â””â”€â”€ package.json            # Scripts and Dependencies
```

## âš¡ Getting Started

**Prerequisites**
* Node.js (v18 or v20+)
* Docker Desktop (Running)
* Git

### 1. Clone the Repository

```bash
git clone <your-repo-url>
cd node-boilerplate
```

### 2. Environment Configuration
Copy the example environment file and configure it.

```bash
cp .env.example .env
```

* **Note:** The default `.env` is pre-configured to work with the Docker setup provided.

### 3. Start Infrastructure (Docker)
Spin up the PostgreSQL database container.

```bash
docker-compose up -d postgres
```

### 4. Install Dependencies

```bash
npm install
```

### 5. Database Migration
Generate and apply the initial database schema.

```bash
# Generate SQL from TypeScript schema
npm run db:generate

# Apply SQL to the running Docker Database
npm run db:migrate
```

### 6. Start Development Server

```bash
npm run dev
```
The server will start at `http://localhost:8000`.


## ğŸ§ª Testing

Run the test suite to verify the application stability.

```bash
npm run test
```

This runs Jest unit and integration tests located in `__tests__` folders.


## ğŸ³ Docker Deployment

To build and run the entire application (API + DB) in production mode:

```bash
docker-compose up -d --build
```

This uses the multi-stage `Dockerfile` to create a lightweight, optimized production image.


## ğŸ“œ Scripts Overview

| Script    | Description |
| -------- | ------- |
| `npm run dev`  | Starts the server in watch mode with hot-reloading.    |
| `npm run build`  | Compiles TypeScript to JavaScript in `dist/`.    |
| `npm run start`  | Runs the compiled production code.    |
| `npm run test`  | Executes Jest test suite.    |
| `npm run db:generate`  | Creates SQL migration files based on schema changes.    |
| `npm run db:migrate`  | Applies migrations to the database (runs inside Docker).    |
| `npm run db:studio`  | Opens Drizzle Studio GUI to view/edit data.    |


## ğŸ›¡ï¸ API Endpoints (Examples)

### Health Check
* `GET /health` - Returns API status.

### Authentication
* `POST /api/v1/auth/register` - Create a new user.
* `POST /api/v1/auth/login` - Login and receive JWT.
* `GET /api/v1/auth/me` - Get current user profile (Protected).